<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>parallel-preprocessor: Source Code Structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">parallel-preprocessor
   &#160;<span id="projectnumber">0.3.0.f176d79</span>
   </div>
   <div id="projectbrief">MPI distributive and multithreading massively parallel geometry processor     for large scale CAE and machine learning, by Qingfeng Xia, UKAEA, 2019</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_wiki_CodeStructure.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Source Code Structure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This software has modular design to simplify dependency and avoid code duplication. For example, <a class="el" href="namespacePPP.html">PPP</a> module depends on C++ standard library and TBB/MPI only, all domain specific module depends on <a class="el" href="namespacePPP.html">PPP</a> and domain related third-party library. Module (C++ namespace) has the same name as the subfolder.</p>
<p>Here is description to each module with one-line description to reach header file. Note: currently the link to module folder only work in markdown format hosted in git repository.</p>
<h2><a href="./md_Base_Readme.html">Base module</a></h2>
<p>This module provides the missing type system for C++, enabling creating class instance from name.</p>
<p>This module is extracted and adapted from <a href="https://www.freecadweb.org/">FreeCAD open source project</a>, it is available as <a href="https://github.com/qingfengxia/cppBase">an external component from github</a></p><ul>
<li><a class="el" href="Type_8h_source.html">Type.h</a>: type system for C++</li>
<li><a class="el" href="BaseClass_8h_source.html">BaseClass.h</a>: root class for type system support</li>
</ul>
<h2><a href="./index.html">PPP module: Parallel processing infrastructure</a></h2>
<p>This module consists of base classes for data pipeline, and parallel processing. It depends on only C++ standard library, TBB and some header only libraries.</p>
<h3>Infrastructure for parallel processing</h3>
<ul>
<li><a class="el" href="Executor_8h_source.html">Executor.h</a>: interface and single-thread executor</li>
<li><a class="el" href="ThreadPoolExecutor_8h_source.html">ThreadPoolExecutor.h</a>: multi-threading executor</li>
<li><a class="el" href="ParallelAccessor_8h_source.html">ParallelAccessor.h</a>: Accessor interface for parallel coupling operation</li>
<li><a class="el" href="SparseMatrix_8h_source.html">SparseMatrix.h</a>: lock free concurrent container to store adjacency matrix</li>
<li><a class="el" href="AsynchronousDispatcher_8h_source.html">AsynchronousDispatcher.h</a>: lock free parallel accessor, based on adjacency matrix</li>
<li><a class="el" href="Progressor_8h_source.html">Progressor.h</a>: report percentage of progress to console</li>
</ul>
<h3>Base classes for data pipeline</h3>
<ul>
<li><a class="el" href="DataObject_8h_source.html">DataObject.h</a>: abstract data container passing through pipeline</li>
<li><a class="el" href="PipelineController_8h_source.html">PipelineController.h</a>: coordinate and execute pipeline (processors in order)</li>
<li><a class="el" href="DataStorage_8h_source.html">DataStorage.h</a>: save result to folder, database, etc</li>
<li><a class="el" href="ProcessorResult_8h_source.html">ProcessorResult.h</a>: single processor result</li>
<li><a class="el" href="ProcessorError_8h_source.html">ProcessorError.h</a>: a root exception class derived from <code>std::exception</code></li>
<li><a class="el" href="Processor_8h_source.html">Processor.h</a>: json based processor meta data (readonly attribute, dependency)</li>
<li><a class="el" href="ProcessorTemplate_8h_source.html">ProcessorTemplate.h</a>: to write a new processor without declare a new class</li>
<li><a class="el" href="CouplingMatrixBuilder_8h_source.html">CouplingMatrixBuilder.h</a>: calculate item pair coupling relationship for ParallelAccessor</li>
</ul>
<p><b>Planned yet completed</b></p><ul>
<li>DistributiveExecutor.h: MPI support</li>
<li><a class="el" href="CommandLineProcessor_8h_source.html">CommandLineProcessor.h</a>: run command line for each item in a process pool</li>
</ul>
<h3>Pipeline control</h3>
<ul>
<li><a class="el" href="Parameter_8h_source.html">Parameter.h</a>: mapping from json config input, to control pipeline and processor behavior</li>
<li><a class="el" href="Context_8h_source.html">Context.h</a>: singleton class for pipeline control (logging, data storage, configuration)</li>
<li><a class="el" href="OperatorProxy_8h_source.html">OperatorProxy.h</a>: support local console and remote operator interaction with pipeline</li>
<li><a class="el" href="AbstractOperator_8h_source.html">AbstractOperator.h</a>: abstract operator interface</li>
<li>ConsoleOperator: terminal operator with console textual input and output</li>
</ul>
<h3>Utilities</h3>
<ul>
<li><a class="el" href="TypeDefs_8h_source.html">TypeDefs.h</a>: alias, typedef and enum, etc</li>
<li><a class="el" href="Utilities_8h_source.html">Utilities.h</a>: utility functions</li>
<li>Process.h: adapter of <code>boost:process</code> and ProcessPool</li>
<li><a class="el" href="fs_8h_source.html">fs.h</a>: adaptor of std::filesystem and boost::filesystem</li>
<li><a class="el" href="Logger_8h_source.html">Logger.h</a>: thread-safe logging using <b>loguru</b> and reporting in json</li>
<li><a class="el" href="UniqueId_8h_source.html">UniqueId.h</a>: geometry hashing algorithm</li>
</ul>
<h2><a href="md_PropertyContainer_Readme.html">PropertyContainer</a></h2>
<p>It is an independent reusable component, with test and Readme inside the module folder.</p><ul>
<li><a class="el" href="PropertyContainer_8hpp_source.html">PropertyContainer.hpp</a>: type-safe dynamic container, base class for DataObject</li>
<li><a class="el" href="Property_8h_source.html">Property.h</a>: type-safe property based on <code>std::any</code> In the future, FreeCAD's Property framework could be used instead see FreeCAD Property <a href="https://www.freecadweb.org/wiki/Property">https://www.freecadweb.org/wiki/Property</a> <code>Enumeration, Quantity, Link, List</code>.</li>
</ul>
<h2><a href="md_Geom_Readme.html">Geom module: Geometry preprocessing</a></h2>
<p>This is an example of full-fledged module for geometry preprocessing.</p>
<p>Concrete classes to build a geometry pipeline:</p><ul>
<li><a class="el" href="GeometryData_8h_source.html">GeometryData.h</a>: container for geometry objects, derived from <code><a class="el" href="classPPP_1_1DataObject.html">PPP::DataObject</a></code> class</li>
<li><a class="el" href="GeometryReader_8h_source.html">GeometryReader.h</a>: step, brep, FreeCAD file reading, and return GeometryData</li>
<li><a class="el" href="GeometryWriter_8h_source.html">GeometryWriter.h</a>: geometry shared shape merging (after imprinting) and writing</li>
<li><a class="el" href="GeometryPipelineController_8h_source.html">GeometryPipelineController.h</a>: extending <code><a class="el" href="classPPP_1_1PipelineController.html">PPP::PipelineController</a></code></li>
<li><a class="el" href="GeometryProcessor_8h_source.html">GeometryProcessor.h</a>: derived from <code><a class="el" href="classPPP_1_1Processor.html" title="base class for all processors, mappable to vtkAlgorithm, opKernel of tensorflow see API of vtkAlgorit...">PPP::Processor</a></code> parent for all geometry processors</li>
<li><a class="el" href="ProcessorSample_8h_source.html">ProcessorSample.h</a>: geometry processor skeleton, copy it when creating a new processor</li>
<li>Goem.cpp: function implementation that should not put in headers</li>
<li><a class="el" href="GeometryMain_8cpp_source.html">GeometryMain.cpp</a>: executable equals to <code>geomPipeline.py config.json</code>, for debugging purpose</li>
</ul>
<p>Concrete geometry processors:</p><ul>
<li><a class="el" href="GeometryShapeChecker_8h_source.html">GeometryShapeChecker.h</a>: geometry shape error check</li>
<li><a class="el" href="BoundBoxBuilder_8h_source.html">BoundBoxBuilder.h</a>: calculate bound box for shapes</li>
<li><a class="el" href="GeometryPropertyBuilder_8h_source.html">GeometryPropertyBuilder.h</a>: shape meta data extraction</li>
<li><a class="el" href="GeometryImprinter_8h_source.html">GeometryImprinter.h</a>: boolean fragment/imprinting for large assemblies</li>
<li><a class="el" href="CollisionDetector_8h_source.html">CollisionDetector.h</a>: collision detection, interference check (digital mockup)</li>
<li><a class="el" href="GeometrySearchBuilder_8h_source.html">GeometrySearchBuilder.h</a>: for action search, extract one shape by boundbox, ID, shape matching, etc</li>
</ul>
<p>Some geometry processors under design and testing:</p><ul>
<li>GeometryEnclosure.h: for action fix (currently not working)</li>
<li>GeometryFixer.h: for action fix (currently not working)</li>
<li>GeometryDecomposer.h: for action decompose (currently not working)</li>
<li>GeometryFaceter.h: for action tessellation (surface meshing)</li>
</ul>
<p>Utility and types:</p><ul>
<li>GeometryTypes,h: typedef, data classes,enum, json IO support, etc</li>
<li><a class="el" href="OccUtils_8h_source.html">OccUtils.h</a>: utility functions to deal with brep file, such as dump problematic geometry</li>
<li><a class="el" href="OpenCascadeAll_8h_source.html">OpenCascadeAll.h</a>: contains all OpenCASCADE headers used by this module</li>
</ul>
<p>Operator interaction:</p><ul>
<li><a class="el" href="GeometryOperatorProxy_8h_source.html">GeometryOperatorProxy.h</a>: implements OperatorProxy for <a class="el" href="namespaceGeom.html" title="This file is adapted from FreeCAD project.">Geom</a> module</li>
<li>GeometryGuiMain.cpp: start a pipeline with Qt 3D viewer (not fully tested)</li>
<li>GuiOperator.h: implements AbstractOperator interface with local 3D viewer</li>
<li>WebSocketOperator.h: implements AbstractOperator interface for remote operation by websocket</li>
</ul>
<h2><a href="../python">python module</a></h2>
<ul>
<li>high-level python interface written in [pybind11]()for ppp such as <code>geomPipeline.py</code></li>
<li>utility scripts</li>
<li>python integration test</li>
<li>setup.py: python pypi package generator</li>
</ul>
<h2>Unit tests</h2>
<p>Testing code has been gathered into a subfolder for each module</p><ul>
<li>C++ unit tests for each module</li>
<li>some demonstration executable written in C++</li>
</ul>
<h2><a href="../third-party">third-party</a> libraries</h2>
<p>Third-party source code used by all modules, module specific third-party code are organized into a <code>third-party</code> in each module. Single header libraries are integrated directly into this project. <br  />
</p>
<ul>
<li>half.hpp: half precision floating point</li>
<li>json.hpp: as dump, configuration</li>
<li>mm.h: NIST matrix market read and write</li>
</ul>
<p>The other are incorporated as git submodule, see also ArchitectureDesign.md.</p><ul>
<li><a href="https://github.com/Delgan/loguru">loguru</a>: thread-safe logging for C++</li>
<li>[catch2](): C++ unit test framework</li>
<li><a href="https://github.com/ukaea/SGeom">SGeom</a>: geometry module extracted from <a href="https://www.salome-platform.org/">Salome platform</a></li>
<li><a href="https://github.com/nushoin/RTree">RTree</a>: spatial search algorithm</li>
</ul>
<p>Some libraries not yet integrated</p><ul>
<li>zlib:</li>
<li>XML:</li>
</ul>
<hr  />
<h3><a href="../scripts">scripts: utility</a></h3>
<ul>
<li>License checker from FreeCAD project</li>
<li>python tool to add license headers to all: <a href="https://github.com/johann-petrak/licenseheaders">https://github.com/johann-petrak/licenseheaders</a></li>
</ul>
<h3><a href="../wiki">wiki: markdown document</a></h3>
<p>Hand-crafted documentation for some specific topics, in addition to doxygen generated html documentation.</p>
<h3><a href="../data">data: testing data</a></h3>
<p>Test data for each module should be organized into a specific subfolder.</p>
<h3><a href="../cMake">cMake</a></h3>
<p>Extra CMake config, mainly downloaded from open source project, see copyright/license in file headers. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
